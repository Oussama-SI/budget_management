<odoo>
    <!-- Define the menu item -->
<data>


<record id="action_kpi_iframe" model="ir.actions.client">
<field name="name">KPI (Embedded)</field>
<!-- must match the JS registry key -->
<field name="tag">mapsly_frame</field>
<!-- pass URL to JS -->
<field name="params">{'url': 'http://localhost:5173/'}</field>
</record>
<record id="view_project_financial_form_inherit_kpi" model="ir.ui.view">
<field name="name">project.financial.progress.form.inherit.kpi</field>
<field name="model">project.financial.progress</field>
<field name="inherit_id" ref="somachame_finance.view_project_financial_form"/>
<field name="arch" type="xml">


<!-- safest: inject after the last button, without referencing field state -->
<xpath expr="//form/header/button[last()]" position="after">
<button name="action_open_kpi_iframe"
type="object"
string="KPI (Embedded)"
class="btn-primary"/>
</xpath>


</field>
</record>

<menuitem id="menu_kpi_iframe"
name="KPI (Embedded)"
parent="somachame_finance.root_project_financial_menu"
action="action_kpi_iframe"
sequence="26"/>
</data>
</odoo>